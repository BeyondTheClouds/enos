# THIS FILE HAS BEEN GENERATED BY THE VBOX PROVIDER
#
# -*- mode: ruby -*-
# vi: set ft=ruby :

$script = <<SCRIPT
cp -r /home/vagrant/.ssh /root/.
apt-get update
apt-get install -y apt-transport-https python-setuptools ca-certificates
easy_install pip && ln -s /usr/local/bin/pip /usr/bin/pip || true
SCRIPT

Vagrant.configure(2) do |config|
  config.vm.box = "debian/jessie64"
  config.vm.provision "shell", inline: $script

  {% for machine in machines %}
  config.vm.define "{{ machine.name }}" do |my|
    my.vm.hostname = "{{ machine.name }}"
    my.vm.network :private_network, ip: "{{ machine.ip1 }}"
    my.vm.network :private_network, ip: "{{ machine.ip2 }}"
    my.vm.network :private_network, ip: "{{ machine.ip3 }}"
    my.vm.provider :virtualbox do |vb|
      vb.cpus={{ machine.cpu }}
      vb.memory={{ machine.mem }}
    end
    my.vm.provider :libvirt do |lv|
      lv.cpus={{ machine.cpu }}
      lv.memory={{ machine.mem }}
      lv.nested = true
    end
  end
  {% endfor %}
end
